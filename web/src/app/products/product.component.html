<div class="overlay" *ngIf="loading">
    <div id="loading-img"></div>
</div>
<h3>PRODUCTS</h3>
<div class="form-group">
    <label for="categoryId">Product Category:</label>
    <select class="form-control" (change)="getProducts($event)" [(ngModel)]="categoryId">
        <option *ngFor="let data of categories"
        [value]="data._id">{{data.categoryname}}
        </option>
    </select>
</div>
<div *ngIf="products.length">
    <!-- <div class="d-flex flex-wrap bg-light">
        <div class="p-2 border" *ngFor="let data of products">
            <i class="fa fa-edit edit-icon icon" (click)="openUpdateModal($event, data)"></i>
            <i class="fa fa-trash delete-icon icon" aria-hidden="true" (click)="openDeleteModal($event, data)"></i>
            <div><b>Titile:</b> {{data.title}}</div>
            <div><b>Sub Title:</b> {{data.subtitle}}</div>
            <div><b>Description:</b> {{data.description}}</div>
            <div><b>Price:</b> {{data.price}}</div>
            <div><b>Quantity:</b> {{data.quantity}}</div>
            <div><b>Measurements:</b> {{data.measurements}}</div>
        </div>
    </div> -->
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Title</th>
          <th scope="col">Description</th>
          <th scope="col">Price</th>
          <th scope="col">Quantity</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of products; let i = index;">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{data.title}}</td>
          <td>{{data.description}}</td>
          <td>{{data.price}}</td>
          <td>{{data.quantity}}</td>
          <td>
            <i class="fa fa-edit edit-icon icon" (click)="openUpdateModal($event, data)"></i>
            <i class="fa fa-trash delete-icon icon" aria-hidden="true" (click)="openDeleteModal($event, data)"></i>
          </td>
        </tr>
      </tbody>
    </table>
</div>

<modal-control [open]="deleteProduct" (close)="onDeleteModalClose($event)" title="Delete Product">
    <div>
      <p>Are you sure you want to delete this Product ?</p>
    </div>
</modal-control>

<modal-control [open]="updateProduct" (close)="onUpdateModalClose($event)" title="Update Product">
    <div>
            <div class="form-group">
              <label for="title">Product Title <span class="required">*</span> :</label>
              <input type="text" class="form-control" id="title" placeholder="Enter Product Title" name="title" [(ngModel)]="title" required>
            </div>
            <div class="form-group">
                <label for="subtitle">Product Sub Title :</label>
                <input type="text" class="form-control" id="subtitle" placeholder="Enter Product Sub Title" name="subtitle" [(ngModel)]="subtitle">
            </div>
              <div class="form-group">
                <label for="subcategoryid">Product Sub Category <span class="required">*</span> :</label>
                <select class="form-control" (change)="setSubCategory($event)" [(ngModel)]="subcategoryid" required>
                    <option *ngFor="let data of subCategories"
                    value="{{data._id}}">{{data.subcategoryname}}
                    </option>
                </select>
              </div>
              <div class="form-group">
                <label for="price">Product Price <span class="required">*</span> :</label>
                <input type="number" class="form-control" id="price" placeholder="Enter Product Price" name="price" [(ngModel)]="price" required>
              </div>
              <div class="form-group">
                <label for="quantity">Product Qunatity :</label>
                <input type="number" class="form-control" id="price" placeholder="Enter Product Quantity" name="quantity" [(ngModel)]="quantity">
              </div>
              <div class="form-group">
                <label for="quantity">Product Measurements :</label>
                <input type="text" class="form-control" id="measurements" placeholder="Enter Product Measurements" name="measurements" [(ngModel)]="measurements">
              </div>
              <div class="form-group">
                <label for="quantity">Product Description <span class="required">*</span> :</label>
                <textarea type="text" class="form-control" id="description" placeholder="Enter Product Description" name="description" [(ngModel)]="description" required></textarea>
              </div>
    </div>
</modal-control>